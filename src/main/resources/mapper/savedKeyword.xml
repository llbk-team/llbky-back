<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.newstrend.dao.SavedKeywordDao">
  <!-- 키워드 저장 -->
   <insert id="insertSavedKeyword"
    parameterType="com.example.demo.newstrend.entity.SavedKeyword">
      insert into saved_keyword(
        member_id, keyword, source_label
      ) 
      values(
        #{memberId}, #{keyword},#{sourceLabel}
      )
  </insert>

  <!-- 특정 멤버 키워드 전체 조회 -->
   <select id="selectSavedKeywordListByMemberId"
    resultType="com.example.demo.newstrend.entity.SavedKeyword">
      select
        saved_keyword_id,
        member_id,
        keyword,
        source_label,
        created_at
      from saved_keyword
      where member_id = #{memberId}
      order by created_at desc
  </select>

  <!-- 멤버 + 키워드 중복 체크 -->
   <select id="selectSavedKeyword"
    resultType="com.example.demo.newstrend.entity.SavedKeyword">
      select
        saved_keyword_id,
        member_id,
        keyword,
        source_label,
        created_at
      from saved_keyword
      where member_id = #{memberId} and keyword = #{keyword}
      limit 1
  </select>

  <!-- 삭제 -->
   <delete id="deleteSavedKeyword">
    delete from saved_keyword
    where saved_keyword_id = #{savedKeywordId}
   </delete>
</mapper>
