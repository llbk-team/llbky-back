<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.newstrend.dao.KetwordMasterDao">
  <!-- 키워드 저장 -->
  <insert id="insertKeyword"
    parameterType="KeywordMaster"
    useGeneratedKeys="true"
    keyProperty="keywordMaster">
      insert into keyword_master(
        keyword, meta, created_at
      )
      values(
        #{keyword}, cast(#{meta} AS JSONB),
        now()
      )
  </insert>

  <!-- 키워드명 조회(중복 체크) -->
   <select id="selectKeywordByName"
    parameterType="string"
    resultType="KeywordMaster">
      select
        keyword_id, keyword, meta, created_at
      from keyword_master
      where keyword = #{keyword}
    </select>

  <!-- 키워드 전체 조회 -->
   <select id="selectAllKeywords"
    resultType="KeywordMaster">
      select
        keyword_id, keyword, meta, created_at
      from keyword_master
      order by created_at desc
  </select>
</mapper>